<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Flex Feed - Home</title>
  <!-- Reset (optional) -->
  <link rel="stylesheet" href="/css/reset.css" />
  <!-- Bulma CSS Framework -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css"
  />
  <!-- Custom CSS (optional) -->
  <link rel="stylesheet" href="../index.css" />
  <!-- <style>
    /* Custom CSS */
    #homePage {
      min-height: 100vh; /* Ensures it covers the full viewport height */
      width: 100%;
      background-color: rgba(128, 128, 128, 0.034);
      display: flex;
      flex-direction: column;
    }
  </style> -->
</head>

<body class="has-background-grey is-fullheight">
  <nav
    class="navbar is-fixed-top is-flex is-justify-content-space-between pt-3 px-3 has-background-info has-text-black has-text-weight-bold">
    <div id="left-header navbar-brand">
      <a href="/" class="logo">
        <h1 class="has-text-weight-bold">Flex Feed</h1>
      </a>
    </div>
    <div id="right-header">
      <a href="/pages/login.html" class="px-4">Login</a>
      <a href="signup.html" class="px-4">Sign up</a>
    </div>
  </nav>

  <!-- Container for the posts feed -->
  <section class="has-background-grey is-fullheight">
    <div class="container is-half is-transparent" style="padding-top: 5rem;" id="homePage">
      <h2 class="title has-text-white">Gym Enthusiasts Feed</h2>
      <div id="postsContainer"></div>
    </div>
  </section>

  <!-- Footer -->
  <footer
    class="navbar is-fixed-bottom is-flex is-justify-content-center py-1 has-background-grey-dark has-text-light">
    <div class="is-flex is-flex-direction-column is-align-content-center has-text-centered">
      <h1 class="has-text-weight-bold">Flex Feed</h1>
      <p>Developed by Phoenix Staley, Ivan Duenas, and Nihal Thomas</p>
      <p>Â© 2022</p>
    </div>
  </footer>

  <!-- JavaScript to load posts -->
  <script>
    const posts = [
      {
        id: 1,
        title: "Is squatting necessary?",
        content: "Squats are fundamental for leg development and overall strength. They help build muscle, improve balance, and increase power in everyday activities.",
        dateUpdated: "3/9/2024",
        datePosted: "3/9/2024",
        author: "Cassandra",
      },
      {
        id: 2,
        title: "Best protein intake",
        content: "How much protein do you really need daily to maximize muscle repair and growth after your workout sessions?",
        dateUpdated: "8/18/2022",
        datePosted: "8/18/2022",
        author: "Phoenix_Creator",
      },
    ];

    // Helper function to truncate text to a given max length
    function truncateText(text, maxLength) {
      return text.length > maxLength ? text.substring(0, maxLength) + '...' : text;
    }

    function loadPosts() {
      const container = document.getElementById("postsContainer");
      posts.forEach((post) => {
        // Create a card for each post
        const postElement = document.createElement("div");
        postElement.className = "card mb-3 is-transparent";

        // Truncate content to a max of 100 characters
        const truncatedContent = truncateText(post.content, 100);

        postElement.innerHTML = `
          <!-- Card Header -->
          <header class="card-header has-background-black is-flex is-justify-content-space-between">
            <p class="card-header-title has-text-light">
              ${post.title}
            </p>
            <p class="has-text-success pr-3 pt-3">
              <span class="has-text-white">Last updated: ${post.dateUpdated}</span>
              <span class="has-text-white"> || </span>
              <span class="has-text-success">Posted: ${post.datePosted}</span>
              <span class="has-text-white"> || </span>
              <a href="#">
                <span class="has-text-info">${post.author}</span>
              </a>
            </p>
          </header>

          <!-- Card Content -->
          <div class="card-content has-background-dark has-text-light">
            <div id="img-wrapper">
              <img id="img" class="image is-256x256" src="../assets/landscape-placeholder.svg" alt="Post Image">
            </div>
            <br>
            <div class="content" id="content">
              ${truncatedContent}
            </div>
          </div>
        `;
        container.appendChild(postElement);
      });
    }

    // Load the posts when the page is loaded
    loadPosts();
  </script>
</body>
</html>
